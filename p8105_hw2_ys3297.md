HW2
================
Yi Sun

Solution to HW2.

``` r
library(tidyverse)
```

    ## ── Attaching packages ────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ───────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Define a path to the Mr. Trash Wheel dataset.

``` r
path_trash_wheel = "./Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```

Read and clean the Mr. Trash Wheel dataset

``` r
trashwheel_df = 
  read_excel(
    path = path_trash_wheel, 
    sheet = "Mr. Trash Wheel", 
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read and clean the 2017 and 2018 precipitation datasets.

``` r
precipitation_2017 = 
  read_excel(
    path = path_trash_wheel, 
    sheet = "2017 Precipitation", 
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)

precipitation_2018 = 
  read_excel(
    path = path_trash_wheel, 
    sheet = "2018 Precipitation", 
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)
```

Next, combine the 2017 and 2018 precipitation datasets with the helper
dataframe `month_df`.

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precipitation_combine = 
  bind_rows(precipitation_2017, precipitation_2018)

precipitation_combine = 
  left_join(precipitation_combine, month_df, by = "month")
```

There are 344 rows in the final Mr. Trash Wheel dataset and 24 rows in
the combined precipitation dataset of 2017 and 2018.

The final Mr. Trash Wheel dataset contains information on year, month,
date, weight and volume of trash collected, and quantity of some
specific kinds of trash.

The combined precipitation dataset of 2017 and 2018 contains
precipitation data by month for 2017 and 2018.

  - The total precipitation in 2018 was 70.33 inches.
  - The median number of sports balls in a dumpster in 2017 was 8.

## Problem 2

Define a path to the NYC subway transit dataset.

``` r
path_NYC_subway = "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv"
```

Read and clean the NYC subway transit dataset. Then only retain
variables needed.

``` r
NYC_subway_df = 
  read_csv(path_NYC_subway) %>% 
  janitor::clean_names() %>% 
  select(line:entrance_type, entry, vending, ada) %>% 
  mutate(entry = as.logical(
    ifelse(entry == "YES", 1, 0)
  ))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

The resulting dataset of NYC subway transit `NYC_subway_df` only keeps
variables like line, station name, latitude and longitude of station,
routes served, entry, vending, entrance type, and ADA compliance.

The variable `entry` is converted to a logical variable.

There are 1868 rows and 19 columns in the resulting dataset of NYC
subway transit `NYC_subway_df`.

The data in `NYC_subway_df` are still not tidy. There are still
redundant columns for routes served, or the route numbers that should be
values are still in the variable names.

  - There are 465 distinct stations.
  - There are 84 ADA compliant stations.
  - 37.704918% of station entrances / exits without vending allow
    entrance.
